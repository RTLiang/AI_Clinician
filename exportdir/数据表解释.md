
## [microbio.csv](./microbio.csv)

#### 表头信息

| 字段名       | 说明                                         |
| ------------ | -------------------------------------------- |
| `subject_id` | 患者匿名编号                                  |
| `hadm_id`    | 一次住院编号                                  |
| `charttime`  | 采样时间戳（秒，epoch，已做脱敏平移）          |
| `chartdate`  | 仅日期粒度的时间戳（秒）                      |

#### 额外信息
- 缺失回填：第一行已记录完整 `charttime`；第二行缺失 `charttime` 时，用 `chartdate`（5879088000.0）回填后再处理。
- 预处理：回填后删除原 `chartdate` 列，并插入占位列以对齐后续格式。
- 合并：与 `culture.csv` 纵向合并为统一事件表 `bacterio`，便于与抗生素时间窗配对。
- 关联 ICU：通过 `demog.csv` 的 `intime/outtime`（±48h 缓冲）补齐缺失的 `icustay_id`；若唯一一次住院亦可直接指派。
- 疑似感染起点：与 `abx.csv` 配对——抗生素先于采样且 ≤24h，或采样先于抗生素且 ≤72h；取最小间隔作为“感染起点”，用于 Sepsis-3 时间窗与后续 SOFA 计算。

#### 示例

| subject_id | hadm_id | charttime    | chartdate    |
| ---------- | ------- | ------------ | ------------ | 
| 96         | 170324  | 5879135400.0 | 5879088000.0 | 
| 96         | 170324  | 缺失         | 5879088000.0 | 

---

## [culture.csv](./culture.csv)

#### 表头信息
| 字段名       | 说明                   |
| ------------ | ---------------------- |
| `subject_id` | 患者匿名编号           |
| `hadm_id`    | 一次住院编号           |
| `icustay_id` | ICU 住院编号           |
| `charttime`  | 采样时间戳（秒）       |
| `itemid`     | 培养事件项目编号（如 3333=血培养） |

#### 额外信息
- culture 指送检培养事件，用于判断是否存在感染来源；会与 `microbio.csv` 合并（构成 `bacterio`）后与抗生素时间配对。

#### 示例

| subject_id | hadm_id | icustay_id | charttime    | itemid | 说明                  |
| ---------- | ------- | ---------- | ------------ | ------ | --------------------- |
| 2          | 163353  | 243653.0   | 5318688000.0 | 3333   | 血培养（CareVue 项目） |
| 5          | 178980  | 214757.0   | 4199839200.0 | 3333   | 血培养（CareVue 项目） |

`itemid=3333` 表示血培养事件，`charttime` 标记采样时间。与 `microbio.csv` 合并后用于疑似感染判定。

---

## [demog.csv](./demog.csv)

#### 表头信息
| 字段名         | 说明                                                                      |
| -------------- | ------------------------------------------------------------------------- |
| `subject_id`   | 患者在 MIMIC-III 中的全局匿名编号，贯穿其所有住院与 ICU 记录。                        |
| `hadm_id`      | 一次医院住院（Hospital Admission）的编号，某位患者每次入院都有独立的 hadm_id。        |
| `icustay_id`   | ICU 住院/留观的编号；一次住院可能包含多次 ICU stay。                                 |
| `admittime`    | 本次住院（hadm_id）的入院时间戳（秒）。                                              |
| `dischtime`    | 本次住院的出院/转出时间戳。                                                          |
| `adm_order`    | 患者的第几次 ICU 入科（按 `intime` 升序编号，1 表示首次 ICU 入科）。                  |
| `unit`         | ICU 类型或病区标识，按提取 SQL 中的整数编码（1=MICU，2=SICU，3=TSICU，4=CSRU，5=NICU，6=CCU）。 |
| `intime`       | 当前 icustay_id 对应的 ICU 入科时间戳。                                              |
| `outtime`      | 当前 icustay_id 的 ICU 出科时间戳。                                                  |
| `los`          | ICU 住院时长（length of stay），单位（天），对应 intime 到 outtime 的差值（秒）再换算为天。   |
| `age`          | ICU 入科时的年龄（以天为单位，`intime` − `dob`）；>89 岁会按 HIPAA 规则截断。         |
| `dob`          | 出生日期时间戳（date of birth）。                                                    |
| `dod`          | 死亡时间戳（date of death），若患者未死亡则为空值。                                   |
| `expire_flag`  | 住院期间是否死亡的布尔标记（1=死亡，0=存活）。                                       |
| `gender`       | 性别（M→1，F→2）。                                                                   |
| `morta_hosp`   | 院内死亡指标（若 `p.dod` 距 `ad.dischtime` ≤24h 记为 1，否则 0）。                    |
| `morta_90`     | ICU 入科后 90 天内死亡指标（`p.dod` 距 `i.intime` ≤90 天 记为 1）。                  |
| `elixhauser`   | Elixhauser 共病评分，用于量化合并症负担，支持后续风险调整。                           |

#### 额外信息
- `unit` 整数编码：1=MICU，2=SICU，3=TSICU，4=CSRU，5=NICU，6=CCU。
- 时间戳为 epoch 秒（已脱敏平移）；用于相对时序与窗口截取。
- `age` 以天为单位（`intime`−`dob`），>89 岁按规则截断。

#### 示例

| subject_id | hadm_id | icustay_id | admittime    | dischtime    | adm_order | unit | intime      | outtime     | los   | age                | dob         | dod         | expire_flag | gender | morta_hosp | morta_90 | elixhauser |
| ---------- | ------- | ---------- | ------------ | ------------ | --------- | ---- | ----------- | ----------- | ----- | ------------------ | ----------- | ----------- | ----------- | ------ | ---------- | -------- | ---------- |
| 9          | 150750  | 220597     | 5675749560.0 | 5676171300.0 | 1         | 1    | 5675749622.0 | 5676209534.0 | 5.3231 | 15263.546550925927 | 4356979200.0 | 5676134400.0 | 1           | 1      | 1.0        | 1.0      | 3.0        |

示例说明：
- `subject_id=9`：患者匿名编号。
- `hadm_id=150750`：此次医院住院编号（ADMISSIONS.HADM_ID）。
- `icustay_id=220597`：此次 ICU 住院编号（ICUSTAYS.ICUSTAY_ID）。
- `admittime=5675749560.0`：医院入院时间，秒（ADMISSIONS.ADMITTIME）。
- `dischtime=5676171300.0`：医院出院/转出时间，秒（ADMISSIONS.DISCHTIME）。
- `adm_order=1`：该患者按 ICU 入科时间排序的第 1 次 ICU 入科。
- `unit=1`：ICU 单元编码 1=MICU（由 `i.first_careunit` 映射）。
- `intime=5675749622.0`：ICU 入科时间，秒（ICUSTAYS.INTIME）。
- `outtime=5676209534.0`：ICU 出科时间，秒（ICUSTAYS.OUTTIME）。
- `los=5.3231`：ICU 停留时长（天）。校验：(`outtime-intime`)/86400 ≈ 5.3231。
- `age=15263.546550925927`：入科时年龄（天）。计算：(`intime-dob`)/86400 ≈ 15263.55 天（约 41.8 年）。
- `dob=4356979200.0`：出生时间，秒（PATIENTS.DOB；对 ≥89 岁者已脱敏平移）。
- `dod=5676134400.0`：死亡时间，秒（PATIENTS.DOD；未死亡则为空）。
- `expire_flag=1`：是否死亡（PATIENTS.EXPIRE_FLAG；1=死亡，0=存活）。
- `gender=1`：性别编码（SQL 映射：M→1，F→2）。
- `morta_hosp=1.0`：院内死亡指标。判断：`p.dod` 距 `ad.dischtime` ≤ 24h，则 1（本例 10.25h，满足）。
- `morta_90=1.0`：ICU 入科后 90 天内死亡。判断：`p.dod` 距 `i.intime` ≤ 90 天，则 1（本例约 4.45 天，满足）。
- `elixhauser=3.0`：Elixhauser 共病评分（各并发症二元变量求和）。
`
---

## [ce010000.csv ~ ce90000100000.csv](./ce010000.csv)

#### 表头信息
| 字段名       | 说明                               |
| ------------ | ---------------------------------- |
| `icustay_id` | ICU 住院编号                       |
| `charttime`  | 观测时间戳（秒）                   |
| `itemid`     | 生命体征/呼吸相关项目编号          |
| `valuenum`   | 数值（见下述接口映射与原值保留说明） |

#### （额外信息）
- 来源：`chartevents` 分块导出（10 个 ce*.csv），包含生命体征、呼吸与氧疗接口等项目，供 MATLAB 组合特征矩阵。
- 接口编码（将 VALUE 文本映射到 VALUENUM，适用于 O2 Delivery Device 等接口类 itemid，如 467）：
  - None → 0（无装置/室内空气）
  - Ventilator → 1（呼吸机）
  - Cannula、Nasal Cannula → 2（鼻导管/导管）
  - Face Tent → 3（面罩/面罩帐）
  - Aerosol-Cool → 4（气雾/雾化面罩）
  - Trach Mask → 5（气管造口面罩）
  - Hi Flow Neb → 6（高流量雾化/接口）
  - Non-Rebreather → 7（非再呼吸面罩）
  - 空字符串 '' → 8（未知/未标注接口）
  - Venti Mask → 9（文丘里面罩）
  - Medium Conc Mask → 10（中浓度面罩）
- 非接口项目：保留原始 `valuenum`（如 FiO2=223835、O2 Flow=223834 等），不做上述映射。
- 用途：在 `AIClinician_sepsis3_def_160219.m` 中，接口列作为“interface”特征，用于与 O2 flow/FiO2 一起清洗与估算缺失值（例如根据接口与流量推算 FiO2），并参与机械通气/氧疗强度等判断。

#### 示例

| icustay_id | charttime    | itemid | valuenum | 说明                                      |
| ---------- | ------------- | ------ | -------- | ----------------------------------------- |
| 210001     | 5.1159213e+09 | 455    | 120.0             | NBP Systolic（非接口项目，原始数值）               |
| 210001     | 5.1159213e+09 | 456    | 87.33329772949219 | NBP Mean（非接口项目，原始数值）                   |
| 210010     | 4.7658384e+09 | 467    | 2.0               | O2 Delivery Device → 编码 2（Cannula/Nasal Cannula） |
| 219999     | 4.6469196e+09 | 470    | 5.0               | O2 Flow (lpm)（CareVue，原始流量数值）             |
| 210010     | 4.7657778e+09 | 470    | 10.0              | O2 Flow (lpm)（CareVue，原始流量数值）             |

---

## [labs_ce.csv](./labs_ce.csv)

#### 表头信息
| 字段名       | 说明                                                         |
| ------------ | ------------------------------------------------------------ |
| `icustay_id` | ICU 住院编号，对应一段 ICU 住院过程。                         |
| `charttime`  | 观测时间戳（秒）。                                            |
| `itemid`     | 实验室项目编号（参见 `D_ITEMS.csv`，多数类别为 `Labs`）。     |
| `valuenum`   | 实验室数值（浮点数），原始 `chartevents` 中的数值型测量结果。 |

#### 额外信息
- 数据来源 `chartevents`，包含床旁/即时化验；用于与 `labs_le.csv` 合并成完整实验室矩阵。

#### 示例

| icustay_id | charttime    | itemid | valuenum | 说明                           |
| ---------- | ------------- | ------ | -------- | ------------------------------ |
| 200001     | 6.686998e+09  | 224828 | 1.00     | 动脉血碱剩余（Arterial Base Excess） |
| 200001     | 6.686998e+09  | 225667 | 1.13     | 动脉离子钙（Ionized Calcium）   |
| 200001     | 6.686998e+09  | 225668 | 1.40     | 乳酸（Lactic Acid）             |
| 200001     | 6.686998e+09  | 227464 | 4.60     | 全血钾（Potassium, whole blood）|
| 200001     | 6.687007e+09  | 225664 | 118.00   | 指尖血糖（Glucose finger stick）|

这些 `itemid` 在 `D_ITEMS.csv` 中的 `category` 多为 `Labs`，说明原始记录即为实验室检验结果；汇出后在 MATLAB 端与 `labs_le.csv` 共同构成完整的实验室特征矩阵。

---

## [labs_le.csv](./labs_le.csv)

#### 表头信息
| 字段名       | 说明                                                                 |
| ------------ | -------------------------------------------------------------------- |
| `icustay_id` | ICU 住院编号，对应 `icustays`。                                       |
| `timestp`    | 检验时间（秒），由 `labevents.charttime` 转换而来。                    |
| `itemid`     | 化验项目编号，参见 `D_LABITEMS.csv`（化学、血气、血液等类别）。        |
| `valuenum`   | 化验数值（浮点数），对应 `labevents.valuenum`。                      |

#### 额外信息
- 取值窗口：按 ICU 入科时间前 24h 至出科时间后 24h 截取，以覆盖护理交接期的检验。

#### 示例

| icustay_id | timestp      | itemid | valuenum | 说明（`D_LABITEMS.csv`）                           |
| ---------- | ------------- | ------ | -------- | -------------------------------------------------- |
| 275225     | 4.660792e+09  | 50861 | 10.0     | Alanine Aminotransferase (ALT) —— 丙氨酸氨基转移酶 |
| 275225     | 4.660792e+09  | 50878 | 16.0     | Aspartate Aminotransferase (AST) —— 天冬氨酸氨基转移酶 |
| 275225     | 4.660792e+09  | 50882 | 11.0     | Bicarbonate —— 碳酸氢根                             |
| 275225     | 4.660792e+09  | 50885 | 0.5      | Bilirubin, Total —— 总胆红素                        |
| 275225     | 4.660792e+09  | 50902 | 101.0    | Chloride —— 氯化物                                  |

将 `labs_le.csv` 与 `labs_ce.csv` 合并后即可获得完整的实验室检验矩阵，供 MATLAB 端计算 SOFA/SIRS 等指标。

---

## [uo.csv](./uo.csv)

#### 表头信息
| 字段名       | 说明                                                                 |
| ------------ | -------------------------------------------------------------------- |
| `icustay_id` | ICU 住院编号。                                                       |
| `charttime`  | 记录时间戳（秒）。                                                   |
| `itemid`     | 尿量项目编号（CareVue/MetaVision 中的尿量输出项，参见 `D_ITEMS.csv`）。 |
| `value`      | 单次尿量（mL）。                                                     |

#### 额外信息
- 用途：用于计算 4 小时尿量与累计液体平衡，并参与 SOFA 肾功能评分计算。

#### 示例

| icustay_id | charttime    | itemid | value | 说明                                      |
| ---------- | ------------- | ------ | ----- | ----------------------------------------- |
| 200001     | 6.687007e+09  | 226560 | 250.0 | MetaVision：Void（排尿）250 mL            |
| 200001     | 6.687089e+09  | 226560 | 60.0  | MetaVision：Void（排尿）60 mL             |
| 200001     | 6.687222e+09  | 226560 | 50.0  | MetaVision：Void（排尿）50 mL             |
| 200003     | 7.245058e+09  | 40069  | 230.0 | CareVue：Urine Out Void 230 mL            |
| 200003     | 7.245065e+09  | 40069  | 0.0   | CareVue：Urine Out Void（未记录有效尿量） |

这些记录会在 MATLAB 端聚合为 4 小时尿量、累计液体平衡等特征，并参与 SOFA 肾功能评分计算。

---

## [preadm_uo.csv](./preadm_uo.csv)

#### 表头信息
| 字段名       | 说明                                                                  |
| ------------ | --------------------------------------------------------------------- |
| `icustay_id` | ICU 住院编号。                                                        |
| `charttime`  | 记录时间戳（秒），位于 ICU 入科时间之前的观测。                        |
| `itemid`     | 预入科尿量项目编号（CareVue/MetaVision 的预入科尿量项，参见 `D_ITEMS.csv`）。 |
| `value`      | 单次尿量（mL）。                                                       |
| `datediff_minutes` | 事件时间相对 ICU 入科时间（`ic.intime`）的分钟差：若为正，表示在入科前若干分钟发生。 |

#### 额外信息
SQL 计算说明：

```sql
60*24*date_part('day', ic.intime - oe.charttime)
  + 60*date_part('hour', ic.intime - oe.charttime)
  +     date_part('min',  ic.intime - oe.charttime) AS datediff_minutes
```

- `date_part('day'|'hour'|'min', ...)`：提取两个时间相差的“天/小时/分钟”分量。
- 常量 `24` 表示 24 小时/天，`60` 表示 60 分钟/小时，将“天”“小时”统一换算为“分钟”。
- `ic.intime - oe.charttime` 为 ICU 入科时间减事件时间；若事件发生在入科之前，则 `datediff_minutes` 为正值。


#### 示例

| icustay_id | charttime    | itemid | value | datediff_minutes |
| ---------- | ------------- | ------ | ----- | ---------------- |
| 200006     | 5.9854932e+09 | 40060  | 950.0 | -91.0            |
| 200019     | 6.5801736e+09 | 40060  | 600.0 | -56.0            |
| 200019     | 6.5801844e+09 | 40060  | 0.0   | -236.0           |
| 200030     | 5.7076371e+09 | 40060  | 240.0 | -36.0            |
| 200035     | 5.89400106e+09| 226633 | 400.0 | -34.0            |

说明：
- 40060（CareVue）= Pre-Admission Output；226633（MetaVision）= Pre-Admission。
- 负的 `datediff_minutes` 表示事件发生在 ICU 入科前的分钟差（与 SQL 计算一致）。

这些记录在 MATLAB 中用于补充入科前的尿量累积，和 `uo.csv` 一起参与后续的出入量与肾功能相关指标计算。


---

## [fluid_mv.csv](./fluid_mv.csv)

#### 表头信息
| 字段名       | 说明                                                                  |
| ------------ | --------------------------------------------------------------------- |
| `icustay_id` | ICU 住院编号。                                                        |
| `starttime`  | 开始时间（秒）。                                                      |
| `endtime`    | 结束时间（秒）。                                                      |
| `itemid`     | 液体项目编号（见 `D_ITEMS.csv` ）。 |
| `amount`     | 本次记录体积（mL）。                                                  |
| `rate`       | 速率（mL/h；推注为空）。                                              |
| `tev`        | 等效生理盐水体积（mL）。                                              |
 
#### 额外信息

- 原理：等效体积 ≈ 体积 × (溶液渗透压 / 300 mOsm/L)。300 mOsm/L 近似 NaCl 0.9% 的渗透压。
- 因而 SQL 中用 `case when itemid in (...) then amount*K`，K 为该类溶液的渗透压比值。例如：
  - `itemid in (30176,30315) → K=0.25`
  - `itemid in (30161) → K=0.3`
  - `itemid in (30020,30015,225823,30321,30186,30211,30353,42742,42244,225159) → K=0.5`（约 150 mOsm/L，低渗）
  - `itemid in (227531) → K=2.75`（约 825 mOsm/L）
  - `itemid in (30143,225161) → K=3`（约 900 mOsm/L）
  - `itemid in (30009,220862) → K=5`（约 1500 mOsm/L）
  - `itemid in (30030,220995,227533) → K=6.66`（约 1998 mOsm/L）
  - `itemid in (228341) → K=8`（约 2400 mOsm/L）
  - 其他未映射项按等渗处理（K=1，`tev=amount`）。

上述各 `itemid` 的具体液体名称可在 `D_ITEMS.csv` 查询（CareVue/MetaVision 的输入项字典）。

这样，可在液体平衡和策略学习中，用同一标尺比较低渗、等渗与高渗输入。MATLAB 端也有同样思想的标准化速率实现。

#### 示例

| icustay_id | starttime   | endtime     | itemid | amount | rate | tev    | 说明                      |
| ---------- | ----------- | ----------- | ------ | ------ | ---- | ------ | ------------------------- |
| 200001     | 6.687010e+09| 6.687010e+09| 225943 | 50.000 | NaN  | 50.000 | Solution（等渗，K=1）      |
| 200001     | 6.687014e+09| 6.687158e+09| 225158 | 200.000| 5.0  | 200.000| NaCl 0.9%（等渗，K=1）    |
| 200001     | 6.687185e+09| 6.687185e+09| 225158 | 250.000| NaN  | 250.000| NaCl 0.9%（等渗，K=1）    |

---

## [fluid_cv.csv](./fluid_cv.csv)

#### 表头信息
| 字段名       | 说明                                                                |
| ------------ | ------------------------------------------------------------------- |
| `icustay_id` | ICU 住院编号。                                                      |
| `charttime`  | 记录时间（秒）。                                                    |
| `itemid`     | 液体项目编号（见 `D_ITEMS.csv`，如 30018=.9% Normal Saline、30015=D5/.45NS）。 |
| `amount`     | 本次记录体积（mL）。                                                |
| `tev`        | 等效生理盐水体积（mL），按 SQL 中的 `case when` 系数映射计算。       |
 
#### 额外信息
- 无 rate 列（按时间点记录 amount）；`tev` 计算思路与 `fluid_mv.csv` 一致：
- 例如 `30015`（D5/.45NS，低渗）→ `tev = amount * 0.5`；
- `30018`（0.9% NS，等渗）→ `tev = amount * 1`；
- 其余项目的等效系数参见提取 SQL 与 `D_ITEMS.csv`。

#### 示例

| icustay_id | charttime    | itemid | amount | tev   | 说明                         |
| ---------- | ------------- | ------ | ------ | ----- | ---------------------------- |
| 200003     | 7.245061e+09  | 30015  | 100.0  | 50.0  | D5/.45NS（K=0.5，低渗）       |
| 200003     | 7.245061e+09  | 30018  | 1000.0 | 1000.0| 0.9% Normal Saline（K=1）    |

---



## [preadm_fluid.csv](./preadm_fluid.csv)

#### 表头信息
| 字段名        | 说明                                                                 |
| ------------- | -------------------------------------------------------------------- |
| `icustay_id`  | ICU 住院编号。                                                       |
| `inputpreadm` | 预入科期间（病人正式进入 ICU 之前的那一段时间）累计的液体体积之和（mL）。若两套系统同时有值，优先取 MetaVision。 |
 
#### 额外信息
提取要点：
- 预入科液体通过一组专用 `itemid` 标识（见提取 SQL 中的列表，如 30054, 30055, 30101... 以及 226361...，227070... 等），仅对这些项求和。
- 在 `icustays` 维度外连接，以便对没有预入科液体记录的 ICU stay 返回空值。
- 本字段为原始体积总和（未进行渗透压等效换算），用于作为入科时的液体基线，与 `fluid_mv.csv`/`fluid_cv.csv` 的实时输入共同计算累计入量与液体平衡。

#### 示例

| icustay_id | inputpreadm |
| ---------- | ------------ |
| 200001     | NaN          |
| 200003     | 1400.0       |
| 200006     | 2000.0       |

---

## [vaso_mv.csv](./vaso_mv.csv)

#### 表头信息
| 字段名       | 说明                                                                 |
| ------------ | -------------------------------------------------------------------- |
| `icustay_id` | ICU 住院编号。                                                       |
| `itemid`     | 药物项目编号（见 `D_ITEMS.csv` ）。 |
| `starttime`  | 片段开始时间（秒）。                                                 |
| `endtime`    | 片段结束时间（秒）。                                                 |
| `rate_std`   | 去甲肾上腺素等效速率（mcg/kg/min），四舍五入到 3 位小数。            |

#### 额外信息
参考 [AIClinician_Data_extract_MIMIC3_140219.ipynb](../AIClinician_Data_extract_MIMIC3_140219.ipynb)
- 原始速率与单位：源表 `RATE`/`RATEUOM` 记录用药速率及单位，适用于 [starttime, endtime) 恒定滴注片段；常见单位 `mcg/kg/min`、`mcg/min`、`units/min`、`units/hour`。
- 等效换算（按 SQL 逻辑）：
- 去甲肾上腺素（`itemid in (30120,221906,30047)`）：
  - `rateuom='mcg/kg/min'`：直接取 `rate`。
  - `rateuom='mcg/min'`：除以 80（默认体重 80 kg）得到 mcg/kg/min。
- 肾上腺素（`itemid in (30119,221289)`）：同去甲肾上腺素，视作 1:1 等效。
- 加压素（`itemid in (30051,222315)`）：单位是“U”。换算为去甲肾上腺素等效 mcg/kg/min：
  - `rateuom='units/min'`：`rate * 5`。
  - `rateuom='units/hour'`：`rate * 5 / 60`。
  - 若未标注单位但 `rate > 0.2`，按 U/h 处理：`rate * 5 / 60`（SQL 中的启发式分支）。
- 苯ylephrine（`itemid in (30128,221749,30127)`）：按文献经验系数 0.45 折算为去甲肾上腺素等效：
  - `mcg/kg/min`：`rate * 0.45`；`mcg/min`：`rate * 0.45 / 80`。
- 多巴胺（`itemid in (221662,30043,30307)`）：经验系数 0.01：
  - `mcg/kg/min`：`rate * 0.01`；`mcg/min`：`rate * 0.01 / 80`。

其他处理：
- 过滤 `statusdescription <> 'Rewritten'`，排除被系统改写的医嘱。
- 所有数值 `round(...,3)` 保留三位小数。
- 体重未知时统一按 80 kg 折算（`/80` 出现于 `mcg/min` → `mcg/kg/min` 的转换）。

#### 示例

| icustay_id | itemid | starttime   | endtime     | rate_std | 说明                            |
| ---------- | ------ | ----------- | ----------- | -------- | ------------------------------- |
| 200024     | 221662 | 4.959764e+09| 4.959780e+09| 0.200    | Dopamine → NE 等效 0.01×（示例） |
| 200024     | 221906 | 4.959764e+09| 4.959766e+09| 0.301    | Norepinephrine（等效系数 1）     |
| 200024     | 221906 | 4.959766e+09| 4.959768e+09| 0.200    | Norepinephrine                  |
| 200024     | 221906 | 4.959768e+09| 4.959779e+09| 0.502    | Norepinephrine                  |
| 200024     | 222315 | 4.959764e+09| 4.959780e+09| 0.200    | Vasopressin → NE 等效（×5/60）   |

---

## [mechvent.csv](./mechvent.csv)

#### 表头信息
| 字段名          | 说明                                                                 |
| --------------- | -------------------------------------------------------------------- |
| `icustay_id`    | ICU 住院编号。                                                       |
| `charttime`     | 记录时间戳（秒）。                                                   |
| `mechvent`      | 机械通气标志（0/1）。根据呼吸机类型/模式/压力/潮气量/PEEP/ETT 等信号取 `max(case ...)`。 |
| `extubated`     | 拔管或自拔管标志（0/1）。当 `itemid=640` 且 `value in ('Extubated','Self Extubation')`。 |
| `selfextubated` | 自拔管标志（0/1）。当 `itemid=640` 且 `value='Self Extubation'`。                       |

#### 额外信息

参考 [AIClinician_Data_extract_MIMIC3_140219.ipynb](../AIClinician_Data_extract_MIMIC3_140219.ipynb)

- 过滤与聚合：从 `chartevents` 选择 `value is not null` 且 `itemid in (...)` 的记录；按 `icustay_id + charttime` 分组，对下述条件取 `max(case ...)` 得到时间点标志。
- 机械通气判定 `mechvent`：
  - 设备/模式直观信号命中即 1：`itemid=720`（VentTypeRecorded，value≠'Other/Remarks'）、`itemid=467`（O2 Delivery Device='Ventilator'）。
  - 呼吸机相关参数任一出现即 1：
    - Minute Volume：`{445, 448, 449, 450, 1340, 1486, 1600, 224687}`。
    - Tidal Volume（set/observed/spont）：`{639, 654, 681, 682, 683, 684, 224684, 224685, 224686}`。
    - 气道/吸气压力（High/Low/Peak/Mean/Neg insp force 等）：`{218, 436, 535, 444, 459, 224695, 224696, 224697, 224746, 224747}`；Inspiratory Pressure：`{221, 1, 1211, 1655, 2000, 226873, 224738, 224419, 224750, 227187}`；Plateau Pressure：`{543}`；APRV 压力：`{5865, 5866, 224707, 224709, 224705, 224706}`。
    - PEEP：`{60, 437, 505, 506, 686, 220339, 224700}`；High Pressure Relief：`{3459}`。
    - 模式信号：PCV `{501, 502, 503, 224702}`，TCPCV `{223, 667, 668, 669, 670, 671, 672}`。
    - ETT（气管插管）：`{157, 158, 1852, 3398, 3399, 3400, 3401, 3402, 3403, 3404, 8382, 227809, 227810}`；PSVlevel：`{224701}`。
- 拔管标志：`extubated` 当 `itemid=640` 且 value∈{'Extubated','Self Extubation'}；`selfextubated` 当 `itemid=640` 且 value='Self Extubation'。
- 参考字典：上述 `itemid` 名称可在 `exportdir/映射表/D_ITEMS.csv` 查询（如 720=Ventilator Mode，467=O2 Delivery Device，224684/224685/224686=Tidal Volume 系列，224687=Minute Volume 等）。


#### 示例

| icustay_id | charttime    | mechvent | extubated | selfextubated |
| ---------- | ------------- | -------- | --------- | ------------- |
| 200003     | 7.245055e+09  | 0        | 0         | 0             |
| 200003     | 7.245061e+09  | 0        | 0         | 0             |
